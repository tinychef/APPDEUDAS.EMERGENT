{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../utils/amortizacion","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":7,"column":31,"index":150}}],"key":"5LzBnceTdgUHJIZUYCOapL2POjs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useDebtStore\", {\n    enumerable: true,\n    get: function () {\n      return useDebtStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _utilsAmortizacion = require(_dependencyMap[1], \"../utils/amortizacion\");\n  // Demo data from user's Excel\n  const DEMO_PRESTAMO = {\n    monto: 101400000,\n    tasaEA: 0.1201,\n    plazoMeses: 180,\n    fechaDesembolso: '2025-03-25',\n    estrategia: 'REDUCIR_PLAZO'\n  };\n  const DEMO_ABONOS = [{\n    cuota: 1,\n    monto: 650000,\n    fecha: '2025-03-12'\n  }, {\n    cuota: 2,\n    monto: 655000,\n    fecha: '2025-04-12'\n  }, {\n    cuota: 4,\n    monto: 320000,\n    fecha: '2025-06-12'\n  }, {\n    cuota: 5,\n    monto: 670000,\n    fecha: '2025-07-12'\n  }, {\n    cuota: 6,\n    monto: 777000,\n    fecha: '2025-08-12'\n  }, {\n    cuota: 7,\n    monto: 655555,\n    fecha: '2025-09-12'\n  }, {\n    cuota: 8,\n    monto: 500000,\n    fecha: '2025-10-12'\n  }, {\n    cuota: 10,\n    monto: 770000,\n    fecha: '2025-12-12'\n  }, {\n    cuota: 11,\n    monto: 1000000,\n    fecha: '2026-01-12'\n  }, {\n    cuota: 12,\n    monto: 1000000,\n    fecha: '2026-02-12'\n  }];\n  const useDebtStore = (0, _zustand.create)((set, get) => ({\n    prestamo: DEMO_PRESTAMO,\n    abonos: DEMO_ABONOS,\n    resultado: null,\n    isLoading: false,\n    hasSetup: true,\n    setPrestamo: params => {\n      set({\n        prestamo: params,\n        hasSetup: true\n      });\n      get().recalculate();\n    },\n    addAbono: abono => {\n      const {\n        abonos\n      } = get();\n      // Check if there's already an abono for this cuota\n      const existingIndex = abonos.findIndex(a => a.cuota === abono.cuota);\n      let newAbonos;\n      if (existingIndex >= 0) {\n        // Update existing\n        newAbonos = [...abonos];\n        newAbonos[existingIndex] = abono;\n      } else {\n        // Add new\n        newAbonos = [...abonos, abono].sort((a, b) => a.cuota - b.cuota);\n      }\n      set({\n        abonos: newAbonos\n      });\n      get().recalculate();\n    },\n    removeAbono: cuota => {\n      const {\n        abonos\n      } = get();\n      set({\n        abonos: abonos.filter(a => a.cuota !== cuota)\n      });\n      get().recalculate();\n    },\n    recalculate: () => {\n      const {\n        prestamo,\n        abonos\n      } = get();\n      set({\n        isLoading: true\n      });\n\n      // Simulate async calculation for smooth UX\n      setTimeout(() => {\n        const resultado = (0, _utilsAmortizacion.calcularAmortizacion)(prestamo, abonos);\n        set({\n          resultado,\n          isLoading: false\n        });\n      }, 100);\n    },\n    loadDemoData: () => {\n      set({\n        prestamo: DEMO_PRESTAMO,\n        abonos: DEMO_ABONOS,\n        hasSetup: true\n      });\n      get().recalculate();\n    },\n    reset: () => {\n      set({\n        prestamo: {\n          monto: 0,\n          tasaEA: 0,\n          plazoMeses: 0,\n          fechaDesembolso: new Date().toISOString().split('T')[0],\n          estrategia: 'REDUCIR_PLAZO'\n        },\n        abonos: [],\n        resultado: null,\n        hasSetup: false\n      });\n    }\n  }));\n\n  // Initialize with demo data\n  setTimeout(() => {\n    useDebtStore.getState().recalculate();\n  }, 0);\n});","lineCount":152,"map":[[7,2,52,0,"Object"],[7,8,52,0],[7,9,52,0,"defineProperty"],[7,23,52,0],[7,24,52,0,"exports"],[7,31,52,0],[8,4,52,0,"enumerable"],[8,14,52,0],[9,4,52,0,"get"],[9,7,52,0],[9,18,52,0,"get"],[9,19,52,0],[10,6,52,0],[10,13,52,0,"useDebtStore"],[10,25,52,0],[11,4,52,0],[12,2,52,0],[13,2,1,0],[13,6,1,0,"_zustand"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,2,0],[14,6,2,0,"_utilsAmortizacion"],[14,24,2,0],[14,27,2,0,"require"],[14,34,2,0],[14,35,2,0,"_dependencyMap"],[14,49,2,0],[15,2,9,0],[16,2,10,0],[16,8,10,6,"DEMO_PRESTAMO"],[16,21,10,31],[16,24,10,34],[17,4,11,2,"monto"],[17,9,11,7],[17,11,11,9],[17,20,11,18],[18,4,12,2,"tasaEA"],[18,10,12,8],[18,12,12,10],[18,18,12,16],[19,4,13,2,"plazoMeses"],[19,14,13,12],[19,16,13,14],[19,19,13,17],[20,4,14,2,"fechaDesembolso"],[20,19,14,17],[20,21,14,19],[20,33,14,31],[21,4,15,2,"estrategia"],[21,14,15,12],[21,16,15,14],[22,2,16,0],[22,3,16,1],[23,2,18,0],[23,8,18,6,"DEMO_ABONOS"],[23,19,18,33],[23,22,18,36],[23,23,19,2],[24,4,19,4,"cuota"],[24,9,19,9],[24,11,19,11],[24,12,19,12],[25,4,19,14,"monto"],[25,9,19,19],[25,11,19,21],[25,17,19,27],[26,4,19,29,"fecha"],[26,9,19,34],[26,11,19,36],[27,2,19,49],[27,3,19,50],[27,5,20,2],[28,4,20,4,"cuota"],[28,9,20,9],[28,11,20,11],[28,12,20,12],[29,4,20,14,"monto"],[29,9,20,19],[29,11,20,21],[29,17,20,27],[30,4,20,29,"fecha"],[30,9,20,34],[30,11,20,36],[31,2,20,49],[31,3,20,50],[31,5,21,2],[32,4,21,4,"cuota"],[32,9,21,9],[32,11,21,11],[32,12,21,12],[33,4,21,14,"monto"],[33,9,21,19],[33,11,21,21],[33,17,21,27],[34,4,21,29,"fecha"],[34,9,21,34],[34,11,21,36],[35,2,21,49],[35,3,21,50],[35,5,22,2],[36,4,22,4,"cuota"],[36,9,22,9],[36,11,22,11],[36,12,22,12],[37,4,22,14,"monto"],[37,9,22,19],[37,11,22,21],[37,17,22,27],[38,4,22,29,"fecha"],[38,9,22,34],[38,11,22,36],[39,2,22,49],[39,3,22,50],[39,5,23,2],[40,4,23,4,"cuota"],[40,9,23,9],[40,11,23,11],[40,12,23,12],[41,4,23,14,"monto"],[41,9,23,19],[41,11,23,21],[41,17,23,27],[42,4,23,29,"fecha"],[42,9,23,34],[42,11,23,36],[43,2,23,49],[43,3,23,50],[43,5,24,2],[44,4,24,4,"cuota"],[44,9,24,9],[44,11,24,11],[44,12,24,12],[45,4,24,14,"monto"],[45,9,24,19],[45,11,24,21],[45,17,24,27],[46,4,24,29,"fecha"],[46,9,24,34],[46,11,24,36],[47,2,24,49],[47,3,24,50],[47,5,25,2],[48,4,25,4,"cuota"],[48,9,25,9],[48,11,25,11],[48,12,25,12],[49,4,25,14,"monto"],[49,9,25,19],[49,11,25,21],[49,17,25,27],[50,4,25,29,"fecha"],[50,9,25,34],[50,11,25,36],[51,2,25,49],[51,3,25,50],[51,5,26,2],[52,4,26,4,"cuota"],[52,9,26,9],[52,11,26,11],[52,13,26,13],[53,4,26,15,"monto"],[53,9,26,20],[53,11,26,22],[53,17,26,28],[54,4,26,30,"fecha"],[54,9,26,35],[54,11,26,37],[55,2,26,50],[55,3,26,51],[55,5,27,2],[56,4,27,4,"cuota"],[56,9,27,9],[56,11,27,11],[56,13,27,13],[57,4,27,15,"monto"],[57,9,27,20],[57,11,27,22],[57,18,27,29],[58,4,27,31,"fecha"],[58,9,27,36],[58,11,27,38],[59,2,27,51],[59,3,27,52],[59,5,28,2],[60,4,28,4,"cuota"],[60,9,28,9],[60,11,28,11],[60,13,28,13],[61,4,28,15,"monto"],[61,9,28,20],[61,11,28,22],[61,18,28,29],[62,4,28,31,"fecha"],[62,9,28,36],[62,11,28,38],[63,2,28,51],[63,3,28,52],[63,4,29,1],[64,2,52,7],[64,8,52,13,"useDebtStore"],[64,20,52,25],[64,23,52,28],[64,27,52,28,"create"],[64,35,52,34],[64,36,52,34,"create"],[64,42,52,34],[64,44,52,46],[64,45,52,47,"set"],[64,48,52,50],[64,50,52,52,"get"],[64,53,52,55],[64,59,52,61],[65,4,53,2,"prestamo"],[65,12,53,10],[65,14,53,12,"DEMO_PRESTAMO"],[65,27,53,25],[66,4,54,2,"abonos"],[66,10,54,8],[66,12,54,10,"DEMO_ABONOS"],[66,23,54,21],[67,4,55,2,"resultado"],[67,13,55,11],[67,15,55,13],[67,19,55,17],[68,4,56,2,"isLoading"],[68,13,56,11],[68,15,56,13],[68,20,56,18],[69,4,57,2,"hasSetup"],[69,12,57,10],[69,14,57,12],[69,18,57,16],[70,4,59,2,"setPrestamo"],[70,15,59,13],[70,17,59,16,"params"],[70,23,59,22],[70,27,59,27],[71,6,60,4,"set"],[71,9,60,7],[71,10,60,8],[72,8,60,10,"prestamo"],[72,16,60,18],[72,18,60,20,"params"],[72,24,60,26],[73,8,60,28,"hasSetup"],[73,16,60,36],[73,18,60,38],[74,6,60,43],[74,7,60,44],[74,8,60,45],[75,6,61,4,"get"],[75,9,61,7],[75,10,61,8],[75,11,61,9],[75,12,61,10,"recalculate"],[75,23,61,21],[75,24,61,22],[75,25,61,23],[76,4,62,2],[76,5,62,3],[77,4,64,2,"addAbono"],[77,12,64,10],[77,14,64,13,"abono"],[77,19,64,18],[77,23,64,23],[78,6,65,4],[78,12,65,10],[79,8,65,12,"abonos"],[80,6,65,19],[80,7,65,20],[80,10,65,23,"get"],[80,13,65,26],[80,14,65,27],[80,15,65,28],[81,6,66,4],[82,6,67,4],[82,12,67,10,"existingIndex"],[82,25,67,23],[82,28,67,26,"abonos"],[82,34,67,32],[82,35,67,33,"findIndex"],[82,44,67,42],[82,45,67,44,"a"],[82,46,67,45],[82,50,67,50,"a"],[82,51,67,51],[82,52,67,52,"cuota"],[82,57,67,57],[82,62,67,62,"abono"],[82,67,67,67],[82,68,67,68,"cuota"],[82,73,67,73],[82,74,67,74],[83,6,69,4],[83,10,69,8,"newAbonos"],[83,19,69,33],[84,6,70,4],[84,10,70,8,"existingIndex"],[84,23,70,21],[84,27,70,25],[84,28,70,26],[84,30,70,28],[85,8,71,6],[86,8,72,6,"newAbonos"],[86,17,72,15],[86,20,72,18],[86,21,72,19],[86,24,72,22,"abonos"],[86,30,72,28],[86,31,72,29],[87,8,73,6,"newAbonos"],[87,17,73,15],[87,18,73,16,"existingIndex"],[87,31,73,29],[87,32,73,30],[87,35,73,33,"abono"],[87,40,73,38],[88,6,74,4],[88,7,74,5],[88,13,74,11],[89,8,75,6],[90,8,76,6,"newAbonos"],[90,17,76,15],[90,20,76,18],[90,21,76,19],[90,24,76,22,"abonos"],[90,30,76,28],[90,32,76,30,"abono"],[90,37,76,35],[90,38,76,36],[90,39,76,37,"sort"],[90,43,76,41],[90,44,76,42],[90,45,76,43,"a"],[90,46,76,44],[90,48,76,46,"b"],[90,49,76,47],[90,54,76,52,"a"],[90,55,76,53],[90,56,76,54,"cuota"],[90,61,76,59],[90,64,76,62,"b"],[90,65,76,63],[90,66,76,64,"cuota"],[90,71,76,69],[90,72,76,70],[91,6,77,4],[92,6,79,4,"set"],[92,9,79,7],[92,10,79,8],[93,8,79,10,"abonos"],[93,14,79,16],[93,16,79,18,"newAbonos"],[94,6,79,28],[94,7,79,29],[94,8,79,30],[95,6,80,4,"get"],[95,9,80,7],[95,10,80,8],[95,11,80,9],[95,12,80,10,"recalculate"],[95,23,80,21],[95,24,80,22],[95,25,80,23],[96,4,81,2],[96,5,81,3],[97,4,83,2,"removeAbono"],[97,15,83,13],[97,17,83,16,"cuota"],[97,22,83,21],[97,26,83,26],[98,6,84,4],[98,12,84,10],[99,8,84,12,"abonos"],[100,6,84,19],[100,7,84,20],[100,10,84,23,"get"],[100,13,84,26],[100,14,84,27],[100,15,84,28],[101,6,85,4,"set"],[101,9,85,7],[101,10,85,8],[102,8,85,10,"abonos"],[102,14,85,16],[102,16,85,18,"abonos"],[102,22,85,24],[102,23,85,25,"filter"],[102,29,85,31],[102,30,85,33,"a"],[102,31,85,34],[102,35,85,39,"a"],[102,36,85,40],[102,37,85,41,"cuota"],[102,42,85,46],[102,47,85,51,"cuota"],[102,52,85,56],[103,6,85,58],[103,7,85,59],[103,8,85,60],[104,6,86,4,"get"],[104,9,86,7],[104,10,86,8],[104,11,86,9],[104,12,86,10,"recalculate"],[104,23,86,21],[104,24,86,22],[104,25,86,23],[105,4,87,2],[105,5,87,3],[106,4,89,2,"recalculate"],[106,15,89,13],[106,17,89,15,"recalculate"],[106,18,89,15],[106,23,89,21],[107,6,90,4],[107,12,90,10],[108,8,90,12,"prestamo"],[108,16,90,20],[109,8,90,22,"abonos"],[110,6,90,29],[110,7,90,30],[110,10,90,33,"get"],[110,13,90,36],[110,14,90,37],[110,15,90,38],[111,6,91,4,"set"],[111,9,91,7],[111,10,91,8],[112,8,91,10,"isLoading"],[112,17,91,19],[112,19,91,21],[113,6,91,26],[113,7,91,27],[113,8,91,28],[115,6,93,4],[116,6,94,4,"setTimeout"],[116,16,94,14],[116,17,94,15],[116,23,94,21],[117,8,95,6],[117,14,95,12,"resultado"],[117,23,95,21],[117,26,95,24],[117,30,95,24,"calcularAmortizacion"],[117,48,95,44],[117,49,95,44,"calcularAmortizacion"],[117,69,95,44],[117,71,95,45,"prestamo"],[117,79,95,53],[117,81,95,55,"abonos"],[117,87,95,61],[117,88,95,62],[118,8,96,6,"set"],[118,11,96,9],[118,12,96,10],[119,10,96,12,"resultado"],[119,19,96,21],[120,10,96,23,"isLoading"],[120,19,96,32],[120,21,96,34],[121,8,96,40],[121,9,96,41],[121,10,96,42],[122,6,97,4],[122,7,97,5],[122,9,97,7],[122,12,97,10],[122,13,97,11],[123,4,98,2],[123,5,98,3],[124,4,100,2,"loadDemoData"],[124,16,100,14],[124,18,100,16,"loadDemoData"],[124,19,100,16],[124,24,100,22],[125,6,101,4,"set"],[125,9,101,7],[125,10,101,8],[126,8,102,6,"prestamo"],[126,16,102,14],[126,18,102,16,"DEMO_PRESTAMO"],[126,31,102,29],[127,8,103,6,"abonos"],[127,14,103,12],[127,16,103,14,"DEMO_ABONOS"],[127,27,103,25],[128,8,104,6,"hasSetup"],[128,16,104,14],[128,18,104,16],[129,6,105,4],[129,7,105,5],[129,8,105,6],[130,6,106,4,"get"],[130,9,106,7],[130,10,106,8],[130,11,106,9],[130,12,106,10,"recalculate"],[130,23,106,21],[130,24,106,22],[130,25,106,23],[131,4,107,2],[131,5,107,3],[132,4,109,2,"reset"],[132,9,109,7],[132,11,109,9,"reset"],[132,12,109,9],[132,17,109,15],[133,6,110,4,"set"],[133,9,110,7],[133,10,110,8],[134,8,111,6,"prestamo"],[134,16,111,14],[134,18,111,16],[135,10,112,8,"monto"],[135,15,112,13],[135,17,112,15],[135,18,112,16],[136,10,113,8,"tasaEA"],[136,16,113,14],[136,18,113,16],[136,19,113,17],[137,10,114,8,"plazoMeses"],[137,20,114,18],[137,22,114,20],[137,23,114,21],[138,10,115,8,"fechaDesembolso"],[138,25,115,23],[138,27,115,25],[138,31,115,29,"Date"],[138,35,115,33],[138,36,115,34],[138,37,115,35],[138,38,115,36,"toISOString"],[138,49,115,47],[138,50,115,48],[138,51,115,49],[138,52,115,50,"split"],[138,57,115,55],[138,58,115,56],[138,61,115,59],[138,62,115,60],[138,63,115,61],[138,64,115,62],[138,65,115,63],[139,10,116,8,"estrategia"],[139,20,116,18],[139,22,116,20],[140,8,117,6],[140,9,117,7],[141,8,118,6,"abonos"],[141,14,118,12],[141,16,118,14],[141,18,118,16],[142,8,119,6,"resultado"],[142,17,119,15],[142,19,119,17],[142,23,119,21],[143,8,120,6,"hasSetup"],[143,16,120,14],[143,18,120,16],[144,6,121,4],[144,7,121,5],[144,8,121,6],[145,4,122,2],[146,2,123,0],[146,3,123,1],[146,4,123,2],[146,5,123,3],[148,2,125,0],[149,2,126,0,"setTimeout"],[149,12,126,10],[149,13,126,11],[149,19,126,17],[150,4,127,2,"useDebtStore"],[150,16,127,14],[150,17,127,15,"getState"],[150,25,127,23],[150,26,127,24],[150,27,127,25],[150,28,127,26,"recalculate"],[150,39,127,37],[150,40,127,38],[150,41,127,39],[151,2,128,0],[151,3,128,1],[151,5,128,3],[151,6,128,4],[151,7,128,5],[152,0,128,6],[152,3]],"functionMap":{"names":["<global>","create$argument_0","setPrestamo","addAbono","abonos.findIndex$argument_0","sort$argument_0","removeAbono","abonos.filter$argument_0","recalculate","setTimeout$argument_0","loadDemoData","reset"],"mappings":"AAA;8CCmD;eCO;GDG;YEE;2CCG,8BD;0CES,2BF;GFK;eKE;gCCE,wBD;GLE;eOE;eCK;KDG;GPC;gBSE;GTO;SUE;GVa;EDC;WSG;CTE"},"hasCjsExports":false},"type":"js/module"}]}